% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_ECM.R
\name{plot_ECM}
\alias{plot_ECM}
\title{Plot ECM Model Coefficient Trends Across Quantiles}
\usage{
plot_ECM(
  estimation,
  order,
  plot_term,
  variable,
  taus,
  ci = TRUE,
  level = 0.95,
  export = TRUE,
  file = NULL
)
}
\arguments{
\item{estimation}{List. Estimation results obtained from \code{coef_estimate()}.}

\item{order}{Integer vector. ARDL orders obtained from \code{order_find()}.
Length must match the number of variables, otherwise an error is raised.}

\item{plot_term}{Character. Specify whether to plot "short" (short-term)
or "long" (long-term) coefficients. Only "short" and "long" are allowed.}

\item{variable}{Character. Name of the variable to plot. Must match one
of the variable names in the data. Special cases:
\itemize{
\item If the variable is the dependent variable and plot_term = "long",
the ECM coefficient is plotted by default.
\item If the variable is an independent variable with ARDL order of zero,
its contemporaneous effect coefficient is plotted.
}}

\item{taus}{Numeric vector. Quantile levels to estimate, same as the
\code{taus} parameter in \code{coef_estimate()}.}

\item{ci}{Logical. Whether to plot confidence intervals. Default is TRUE.}

\item{level}{Numeric. Confidence level. Only 0.9, 0.95, and 0.99 are allowed.
Default is 0.95.}

\item{export}{Logical. Whether to export the plot to disk. Default is TRUE.}

\item{file}{Character. File path for exporting the plot. Required if export = TRUE.}
}
\value{
A list containing two elements:
\itemize{
\item plot: A ggplot object of the coefficient trend plot
\item plot_data: The data used for plotting
}
}
\description{
This function plots the long-term and short-term coefficient trends for
ECM model variables across specified quantile levels. For short-term
coefficients, if a variable has multiple lags, the sum of coefficients
across all lags is plotted.
}
\examples{
# Generate sample data
sample_data <- sim_data_generate(
  b = c(0.5, 0.7, 0.3, 0.2),
  order = c(1, 1),
  size = 100,
  reps = 1
)[[1]]

# Find optimal lag order
optimal_order <- order_find(sample_data, selection = "BIC", export = FALSE)

# Estimate OLS and quantile regression models
results <- coef_estimate(
  data = sample_data,
  order = optimal_order,
  taus = c(0.25, 0.5, 0.75),
  boots = 50,
  export = FALSE
)

# Plot long-term coefficient for the first variable
plot_result <- plot_ECM(
  estimation = results,
  order = optimal_order,
  plot_term = "long",
  variable = names(optimal_order)[1],
  taus = c(0.25, 0.5, 0.75),
  ci = TRUE,
  level = 0.95,
  export = FALSE
)

# Display the plot
print(plot_result$plot)
}
